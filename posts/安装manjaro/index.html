<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="jaywhen" />
	
	
	
	<title>安装Manjaro ｜ Jaywhen</title>
	
    
    
    <meta name="description" content="The most beautiful Linux distribution" />
    

    
    
    <meta name="keywords" content="jaywhen, life, love" />
    

	
    
    <link rel="shortcut icon" href="images/favicon.ico" />

    <link rel="stylesheet" type="text/css" media="screen" href="css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/highlight.css" />

    
    
</head>

<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/posts/">Archive</a>
            </li>
            
            <li>
                <a href="/tags/">Tags</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="">
                    <span>Jaywhen</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title">保持理智，相信未来</p>
            <div class="my_socials">
                
                
                <a href="https://github.com/jaywhen" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="https://www.instagram.com/jaywhenx/" title="instagram" target="_blank"><i class="ri-instagram-fill"></i></a>
                
                
                
                <a href="https://twitter.com/jaywhen6" title="twitter" target="_blank"><i class="ri-twitter-fill"></i></a>
                
                
                <a href="/index.xml" type="application/rss+xml" title="rss" target="_blank"><i
                        class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/posts/%E5%AE%89%E8%A3%85manjaro/'>安装Manjaro</a></h2>
                        <span class="date">2020.03.10</span>
                    </div>
                    <div class="post_content markdown"><p><img src="https://cdn.jsdelivr.net/gh/jaywhen/imageBed/imgxjwnb.png" alt=""></p>
<hr>
<h3 id="不再更新虚拟机更加符合我的需求首发于我的博客园httpswwwcnblogscomjaywhen-xiangp11561661html">不再更新，虚拟机更加符合我的需求，首发于<a href="https://www.cnblogs.com/Jaywhen-xiang/p/11561661.html">我的博客园</a></h3>
<blockquote>
<p>此文为本人原创，以下链接的文章都是部分盗用本人的图或者内容，欢迎大家发我与本人这篇文章相似度大的博文链接！</p>
<ul>
<li><a href="https://www.cnblogs.com/HGNET/p/12712977.html">【Liunx】manjaro双系统安装（折腾）教程</a>
本人真的十分讨厌这种跳梁小丑，看似他好像发了很多文，其实都是许多领域的皮毛，内容还不一定是原创的，令人作呕</li>
</ul>
</blockquote>
<hr>
<h3 id="readme">〇、README</h3>
<blockquote>
<ol>
<li>本人电脑相关配置：<strong>单硬盘</strong> <strong>UEFI+GPT格式启动</strong> <strong>Win10家庭版</strong></li>
<li>如上所说，本篇博文只适用于启动方式为<strong>UEFI+GPT</strong></li>
</ol>
</blockquote>
<h3 id="一前言">一、前言</h3>
<blockquote>
<p><code>Manjaro</code>是一款基于Arch Linux的、用户友好的发行版，虽然<code>Manjaro is not Arch</code>，但它依然能够从<code>AUR(Arch User Repository)</code>中提取软件包，且有自己的独立库。</p>
<p>它有且不仅有如下特性：</p>
<ul>
<li><strong>Pre-installed</strong> （在你还没正式安装时，你便可从启动盘直接流畅体验它的桌面系统）</li>
<li>快、强、高效</li>
<li>滚动发布，无需定期更新系统版本</li>
<li>&hellip;&hellip;</li>
</ul>
</blockquote>
<h3 id="二准备工作">二、准备工作</h3>
<ol>
<li>
<p><strong>查看电脑的启动方式:</strong></p>
<blockquote>
<p>目前主流的两种启动系统的方式：
<strong>legacy</strong>启动+<strong>MBR</strong>分区表</p>
<p><strong>UEFI</strong>启动+<strong>GPT</strong>分区表</p>
<p>我们需要查看自己硬盘使用的哪种分区：</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">文件资源管理器-&gt;（右键）此电脑-&gt;管理-&gt;磁盘管理
</code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/jaywhen/imageBed/imgdiskto.png" alt=""></p>
<p>由于我的电脑是[单硬盘]，所以只有一个磁盘0
右键选择一个磁盘-&gt;属性-&gt;卷
在磁盘分区形式一栏中可以看到是GPT or MBR</p>
</blockquote>
</li>
<li>
<p><strong>下载manjaro镜像：</strong></p>
<blockquote>
<p>对一般用户而言，官网下载镜像的速度会非常慢，所以这里可选择在<a href="https://mirrors.tuna.tsinghua.edu.cn/osdn/storage/g/m/ma/manjaro/kde/">清华大学开源软件镜像站</a>下载manjaro kde 的镜像文件：</p>
<p><img src="https://cdn.jsdelivr.net/gh/jaywhen/imageBed/imgtun.jpg" alt=""></p>
</blockquote>
</li>
<li>
<p><strong>制作启动盘：</strong></p>
<blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jaywhen/imageBed/imgrufu.png" alt=""></p>
<p>制作启动盘官方文档推荐使用<a href="http://rufus.ie/">Rufus</a>或<a href="https://launchpad.net/win32-image-writer/">Image Writer</a>，我这里使用Rufus来制作
ps:rufus是用c写的（难怪这么快），是一个开源项目，有兴趣的小伙伴可以去它的<a href="https://github.com/pbatard/rufus/tree/master/src">github</a>上研究研究
最新版本的Rufus可能无法选择分区类型，可以选择下载低版本
如上图所示，个人感觉<code>FossHub</code>上的快些</p>
<p>插入u盘，打开<code>Rufus</code>，我的分区类型一栏选择的是<code>GPT</code>，其他的都为默认，</p>
<p>点击<code>开始</code>后弹出该窗口，点击以<code>DD</code>镜像模式写入
<img src="https://cdn.jsdelivr.net/gh/jaywhen/imageBed/imgd.png" alt=""></p>
</blockquote>
</li>
<li>
<p><strong>在Windows上为manjaro分配磁盘空间：</strong></p>
<blockquote>
<p><kbd>此电脑</kbd>&ndash;<kbd>管理</kbd>&ndash;<kbd>磁盘管理</kbd>
选一块空间充裕的盘，从上面分一部分空间（大小因需求而异）:</p>
<p><kbd>空间充裕的盘</kbd>&ndash;<kbd>压缩卷</kbd>&ndash;<kbd>想要分配的空间大小</kbd>&ndash;<kbd>压缩</kbd></p>
<p>压缩完了就可暂时不用管了，<strong>不用格式化</strong>，后面会用到</p>
</blockquote>
</li>
<li>
<p><strong>关闭windows快速启动与安全启动</strong></p>
<blockquote>
<p>快速启动：参考<a href="https://jingyan.baidu.com/article/48b558e30ca7977f38c09a95.html">这篇文章</a>
安全启动：<kbd>BIOS</kbd>&ndash;<kbd>System Configuration</kbd>&ndash;<kbd>Boot Options</kbd>&ndash;<kbd>Secure Boot</kbd>&ndash;<kbd>Disabled</kbd></p>
</blockquote>
</li>
</ol>
<h3 id="三开始安装">三、开始安装</h3>
<ol>
<li>
<p><strong>设置从U盘启动：</strong>
<kbd>Windows设置</kbd>&ndash;<kbd>更新和安全</kbd>&ndash;<kbd>恢复</kbd>&ndash;<kbd>立即重新启动</kbd></p>
</li>
<li>
<p><strong>配置选项</strong></p>
<blockquote>
<p>成功从U盘启动后，首先会进入配置界面，唯一需要注意的是<strong>driver</strong>的选择</p>
<p>参考Manjaro用户指南：</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">Free :

drivers are open-source, like Manjaro itself, written and updated by a large 

community. For AMD graphics cards and hardware with Intel-based integrated 

graphics, this is the best choice.

Non-Free :

drivers are closed-source, written and updated only by the hardware manufacturers. 

This is generally the best choice for newer Nvidia dedicated graphics. For older 

Nvidia hardware the Free drivers work very well.

If in doubt, choose Free drivers. If you want to play games with an Nvidia 

graphics card, choose non-Free drivers.

/* 来自我的渣渣翻译...... */

(满足以下条件选择)Free:
驱动是开源的，例如Manjaro自身，由一个大型社区编写与更新；
AMD的显卡 || 基于Intel的集显；
很老的Nvidia显卡；
实在不知道怎么选，或者条件(模糊)都不怎么满足

(满足以下条件选择)Non-Free:
驱动是闭源的，仅由硬件制造商编写与更新；
新的Nvidia显卡；
想用Nvidia显卡打游戏



</code></pre></div><p>如下表：</p>
<table>
<thead>
<tr>
<th align="center">Free</th>
<th align="center">Non-Free</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">开源驱动</td>
<td align="center">闭源驱动</td>
</tr>
<tr>
<td align="center">AMD显卡</td>
<td align="center">新Nvidia显卡</td>
</tr>
<tr>
<td align="center">基于Intel的集显</td>
<td align="center">想用Nvidia显卡打游戏</td>
</tr>
<tr>
<td align="center">老的Nvidia显卡</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">实在不知道怎么选(条件都不满足)</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>设置完毕后，<kbd>enter</kbd>Boot进入桌面</p>
</blockquote>
</li>
<li>
<p><strong>分区</strong></p>
<blockquote>
<p>选择手动分区</p>
<p>我的划分表(共60G)：</p>
<table>
<thead>
<tr>
<th align="center">大小</th>
<th align="center">文件系统</th>
<th align="center">挂载点</th>
<th align="center">标记</th>
<th align="center">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">8G</td>
<td align="center">linuxswap</td>
<td align="center"></td>
<td align="center">swap</td>
<td align="center"><a href="https://www.cnblogs.com/kerrycode/p/5246383.html">about swap</a></td>
</tr>
<tr>
<td align="center">500M</td>
<td align="center">ext4</td>
<td align="center">/boot</td>
<td align="center">boot</td>
<td align="center">存放与Linux启动相关的程序</td>
</tr>
<tr>
<td align="center">20G</td>
<td align="center">ext4</td>
<td align="center">/</td>
<td align="center">root</td>
<td align="center">用于存放系统相当于win10的C盘</td>
</tr>
<tr>
<td align="center">the rest</td>
<td align="center">ext4</td>
<td align="center">/home</td>
<td align="center">无需标记</td>
<td align="center">用户数据存储</td>
</tr>
</tbody>
</table>
<p>找到在Windows上划分的空闲区,点击创建</p>
<p><code>swap</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/jaywhen/imageBed/imgswa.png" alt=""></p>
<p><code>boot</code>
<img src="https://cdn.jsdelivr.net/gh/jaywhen/imageBed/imgboo.png" alt="">
<code>/</code>
<img src="https://cdn.jsdelivr.net/gh/jaywhen/imageBed/imgroo.png" alt="">
<code>/home</code>
<img src="https://cdn.jsdelivr.net/gh/jaywhen/imageBed/imghom.png" alt=""></p>
</blockquote>
</li>
<li>
<p><strong>挂载Manjaro引导</strong></p>
<blockquote>
<p>此时找到大小为100M的分区
这里面有Windows的引导分区，所以内容点保留
将manjaro也挂载在上面，如图所示：
<img src="https://cdn.jsdelivr.net/gh/jaywhen/imageBed/imgef.png" alt=""></p>
</blockquote>
</li>
</ol>
<h3 id="四完成">四、完成</h3>
<blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/jaywhen/imageBed/imgove.png" alt="">
一切才刚刚开始&hellip;</p>
</blockquote>
<h3 id="五配置">五、配置</h3>
<p><code>sudo pacman-mirrors -c China -m rank # 更改源</code></p>
<p>增加中文社区的源，在 <code>/etc/pacman.conf</code> 中添加 <code>archlinuxcn</code> 源，加上：</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">[archlinuxcn]
SigLevel = Optional TrustedOnly
Server = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch
</code></pre></div><p>安装 <code>archlinuxcn-keyring</code> 包以导入 <code>GPG key</code>，否则的话 key 验证失败会无法安装：</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo pacman -Sy archlinuxcn-keyring
sudo pacman -Syy #更新
</code></pre></div><p><code>sudo pacman -S yay						# Arch Linux AUR 包管理工具</code></p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback"># 解决双系统时间不同步问题
timedatectl set-local-rtc true
</code></pre></div><p>输入法：</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo pacman -S fcitx fcitx-configtool
//建议就这样，然后在fcitx设置里面选择自带的拼音输入法和英语输入法就好了
//搜狗输入法总是用不了多久就出bug，很不稳定，会造成不必要的麻烦
//以下是安装搜狗输入法
sudo pacman -S fcitx-gtk2 fcitx-gtk3 fcitx-qt4 fcitx-qt5 fcitx-sogoupinyin
#解决中文输入法无法切换问题: 添加文件 ~/.xprofile：
export GTK_MODULE=fcitx
export QT_IM_MODULE=fcitx
export XMODIFIERS=&#34;@im=fcitx&#34;
#若以上执行完后无法输入中文，只能显示字母
#删掉~/.conf下所有与Sogou相关的文件夹
yay -S fcitx -im
sudo pacman -S fcitx-qt4 fcitx-qt5 fcitx-gtk2 fcitx-gtk3
#若输入法中文乱码
将搜狗输入法调整至输入法序列第二位
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 手动安装oh-my-zsh</span>
git clone https://github.com/ohmyzsh/ohmyzsh.git ~/.oh-my-zsh
cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc            
<span class="c1"># ----------------------------------------------------------------</span>

<span class="c1"># 一些软件</span>
sudo pacman -S google-chrome            <span class="c1">#配合google-access-helper完美解决无法访问某不存在网站，需要可发邮箱</span>
sudo pacman -S visual-studio-code-bin 	<span class="c1"># vscode</span>
yay -S typora 			        <span class="c1"># markdown编辑利器</span>
yay -S deepin-wine-tim			<span class="c1"># Tim</span>


<span class="c1">#----upd：2020/4/28--</span>
<span class="c1">#----2020/4/28版本的TIM无法输入中文解决：</span>
<span class="c1">#编辑 /opt/deepinwine/apps/Deepin-TIM/下的  run.sh文件</span>
<span class="c1">#加入：</span>
<span class="nb">export</span> <span class="nv">GTK_IM_MODULE</span><span class="o">=</span><span class="s2">&#34;fcitx&#34;</span>
<span class="nb">export</span> <span class="nv">QT_IM_MODULE</span><span class="o">=</span><span class="s2">&#34;fcitx&#34;</span> 
<span class="nb">export</span> <span class="nv">XMODIFIERS</span><span class="o">=</span><span class="s2">&#34;@im=fcitx&#34;</span>

</code></pre></div><h3 id="六参考">六、参考</h3>
<p><a href="https://mirrors.tuna.tsinghua.edu.cn/osdn/storage/g/m/ma/manjaro/Manjaro-User-Guide.pdf">Manjaro-User-Guide</a></p></div>
                    <div class="post_footer">
                        
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>
                                    
                                    <a href="tags/manjaro/">Manjaro</a>
                                    
                                </span>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                
                <div class="doc_comments"></div>
                
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">
        <a href="https://varkai.com">Designed by VarKai,</a>
        <a href="http://www.gohugo.io/">Proudly published with Hugo</a>
    </div>

    <div class="footer_slogan">
        <span>love life</span>
    </div>
</footer>
    <script src="js/jquery-3.5.1.min.js"></script>
<link href="css/fancybox.min.css" rel="stylesheet">
<script src="js/fancybox.min.js"></script>
<script src="js/zozo.js"></script>


<script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>



</body>

</html>